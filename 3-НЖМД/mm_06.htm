<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Форматирование HDD</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<style type="text/css">
<!--
.style4 {color: #0000FF}
.style5 {
	color: #CC0000;
	font-weight: bold;
}
.style7 {font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 80%; }
.style8 {font-family: Verdana, Arial, Helvetica, sans-serif}
div.CM49 {mso-style-name:CM49;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:24.65pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
div.CM50 {mso-style-name:CM50;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.15pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
div.CM57 {mso-style-name:CM57;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:21.15pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
div.CM59 {mso-style-name:CM59;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:2.65pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
div.CM6 {mso-style-name:CM6;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:13.8pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
div.Default {mso-style-name:Default;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
li.CM49 {mso-style-name:CM49;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:24.65pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
li.CM50 {mso-style-name:CM50;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.15pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
li.CM57 {mso-style-name:CM57;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:21.15pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
li.CM59 {mso-style-name:CM59;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:2.65pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
li.CM6 {mso-style-name:CM6;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:13.8pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
li.Default {mso-style-name:Default;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
p.CM49 {mso-style-name:CM49;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:24.65pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.CM50 {mso-style-name:CM50;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.15pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.CM57 {mso-style-name:CM57;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:21.15pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.CM59 {mso-style-name:CM59;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:2.65pt;
	margin-left:0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.CM6 {mso-style-name:CM6;
	mso-style-parent:Default;
	mso-style-next:Default;
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:13.8pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.Default {mso-style-name:Default;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
#Layer1 {
	position:absolute;
	left:10px;
	top:1721px;
	width:136px;
	height:16px;
	z-index:1;
}
.style11 {font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 85%; }
-->
</style>
</head>
<body background="img/green.jpg" class="style7" STYLE="background-repeat:repeat-y;">
<h4 align="left"><u><a name="top"></a><span class="style11">Форматирование HDD</span></u></h4>
<table width="541" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="31" valign="top">&nbsp;</td>
    <td width="20" align="left" valign="top"> <a href="mm_01.htm#&#1074;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1077;"><img src="img/proced.gif" alt="" width="20" height="18" border="0"></a></td>
    <td width="490"> <u><a href="mm_06.htm#физическое">Физическое форматирование (низкоуровневое)</a><a href="mm_04.htm#Структ_схема" class="style8"></a></u></td>
  </tr>
  <tr>
    <td height="5">&nbsp;</td>
    <td height="5">&nbsp;</td>
    <td height="5">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td align="left" valign="top"><a href="mm_01.htm#&#1074;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1077;"><img src="img/proced.gif" alt="" width="20" height="18" border="0"></a></td>
    <td><u><a href="mm_06.htm#логическое">Логическое форматирование</a><a href="mm_04.htm#Структ_схема" class="style8"></a></u></td>
  </tr>
  <tr>
    <td height="5">&nbsp;</td>
    <td height="5">&nbsp;</td>
    <td height="5">&nbsp;</td>
  </tr>
  <tr>
    <td height="5">&nbsp;</td>
    <td valign="top"><A HREF="index.htm"><img src="img/bkarrow.gif" alt="Back to beginning" width="20" height="18" border="0"></a></td>
    <td bordercolor="#ECE9D8" class="style8"><A HREF="index.htm" class="style5"> Назад к оглавлению </a></td>
  </tr>
</table>
<DIV>
  <p>	В   далекие времена пользователям нужно было помнить адреса блоков, в   которых они хранили информацию. Блоков   на современных дисках почти 100 миллионов,   так   что запоминать уже не хочется. И   это правильно! Для   наведения порядка в информации существует несколько уровней абстракции.   Процесс   разметки диска называют форматированием. Отличают   физическое и логическое форматирование. </p>
  <p><strong>Физическое форматирование   (низкоуровневое)</strong><a name="физическое"></a></p>
  <p><a href="mm_ind.htm#Low_levelformat">Физическое   форматирование</a> происходит на первых двух уровнях дисковой иерархии, описанной   в разделе 2.3.2, и   заключается в создании на диске адресных меток секторов, расстановке   контрольных сумм и специальных синхронизирующих заполнителей между   секторами, чтобы   сам контроллер мог разобраться в потоке битов, приходящих   с диска. Пользователям   обычно нет необходимости заниматься форматированием на низком уровне,   поскольку   эту задачу выполняют производители. Потребность   в низкоуровневом форматировании при правильной эксплуатации диска вообще не   должна возникать. Однако,   из-за   возможной расстройки головок возможна потеря информации, и   тогда низкоуровневое форматирование способно вернуть диску емкость. </p>
  <p>Емкость   современных дисков, а   соответственно и плотность записи, настолько   велики, что   очень трудно найти идеальную магнитную пластину, в   которой бы не было дефектов. Но   даже если такая пластина нашлась бы, в   процессе ее эксплуатации дефекты могут возникнуть. Изготовить   пластину большей емкости гораздо проще, чем   изготовить пластину без дефектов. По   этой причине современные диски имеют встроенные таблицы переадресации блоков и   специальный список резервных блоков. Резервные   блоки форматируются так же, как   и обычные, но   не имеют явного адреса для конечного пользователя ? компьютера.   Если   интегрированный в диск контроллер обнаруживает ошибку при записи некоторого   блока, то   он переадресует его на новое место, выбираемое   из списка резерва. При   этом резервный блок получает номер того блока, который   вышел из строя. </p>
  <p>Контроллеры   современных жестких дисков поддерживают технологию <a href="mm_10.htm#smart">SMART</a>, суть   которой состоит в следующем. Контроллер   ведет учет количеству переадресованных блоков и количеству оборотов   диска, сделанных   с момента его пуска. Поскольку   диск вращается с постоянной скоростью, то   количество оборотов является единицей измерения дискового времени (встроенных   часов у диска нет). На   основе этих данных можно оценивать скорость исчерпания резерва и делать прогнозы   о моменте выхода диска из строя. Таким   образом, диск   позволяет интеллектуально контролировать наработку на отказ. Операционная   система может отслеживать динамику изменения параметров жесткого диска и   предупредить пользователя о выходе диска из строя заблаговременно, когда   информацию еще можно спасти. </p>
  <p>Хотя   использование резервных блоков улучшает характеристики диска, нужно   помнить, что   резервный блок будет задействован только, когда   контроллер «ткнут   носом» в   неисправный блок. При   этом в случае записи потери информации не произойдет, но   вот в случае чтения пропавшую информацию нельзя будет восстановить из резервного   блока. Это   повлечет потенциальные ошибки на более высоком уровне, даст   искажение файлов и, вероятно,   сбои   программного обеспечения. </p>
</DIV>
<DIV>
  <p> <strong>Логическое форматирование<a name="логическое"></a></strong></p>
  <p>На   более высоком уровне диск должен быть логически отформатирован. <a href="mm_ind.htm#Логическое_форматирование">Логическое   форматирование</a> происходит на уровне <a href="mm_04.htm#ур_5">5 иерархии</a>, заключается   в создании файловой системы, благодаря   чему достигается более высокая организация информации. Файлы   имеют символьные имена, позволяя   программам и пользователям осуществлять структурирование информации,   осуществлять   более быстрый поиск информации, а   также управлять безопасностью доступа к информации. </p>
  <p>Обыкновенно   форматированием называют операцию, выполняемую   утилитой format в   DOS или   Windows, либо   утилитой типа dinit в   UNIX. Эти   утилиты проводят проверку блоков диска на исправность и на основе этих данных   создают карту свободных блоков раздела, пригодных   для хранения информации. Кроме   того, они   создают корневой каталог и так называемый суперблок, в   котором находятся все необходимые сведения, необходимые   для работы с файловой системой. Суперблок   обыкновенно располагается либо в самом первом блоке раздела (вместе   с загрузчиком ОС), либо   в другом блоке, положение   которого фиксировано относительно начала раздела. При   загрузке операционной системы драйвер файловой системы производит считывание   суперблока в память. На   основе информации, взятой   из него, он   вычисляет расположение на диске корневого каталога и всех пользовательских   данных. Дальнейшие   обращения к диску производятся программами через файловую подсистему ОС. </p>
  <p>В   процессе форматирования разделу можно назначить символьное имя - метку   тома. Она   служит для более простой идентификации логического диска среди файловой системы   среди других логических дисков. </p>
  <p>Логическое   форматирование применяется к разделу диска. Созданная   в разделе файловая система обыкновенно отождествляется с самим разделом.   Однако,   это   не совсем так. Дело   в том, что   информация о расположении раздела на диске хранится в суперблоке независимо от   таблицы разделов, располагаемой   в MBR. При   создании суперблока в процессе форматирования информация из таблицы разделов о   положении и длине форматируемого раздела переносится в суперблок. Это   происходит по той причине, что   операционная система берет все данные для работы с разделом именно из   суперблока, а   не таблицы разделов. Поэтому   при изменении параметров раздела в таблице файловая система не ощутит этого   изменения. Таким   образом, содержимое   таблицы разделов может не соответствовать файловой системе, если   воспринимать ее как систему указателей для поиска нужных файлов или нового места   для записи новых. </p>
  <p>У   утилиты format есть   проблема, связанная   с форматированием разделов под <a href="mm_08.htm#fat16">FAT16</a>,   <a href="mm_08.htm#fat32">FAT32</a>. Прежде,   чем   приступить к форматированию, она   считывает суперблок раздела и анализирует его, пытаясь   выяснить, был   ли раздел форматирован ранее. В   том случае, если   раздел уже форматировался, она   принимает за длину файловой системы содержимое суперблока, а   не длину раздела, записанную   в таблице разделов. В   результате этой ошибки новое форматирование создает файловую систему такой же   длины какая была у старой. Это   приводит к проблемам для многих пользователей, которые   пытаются вручную пересоздать разделы с целью объединить несколько дисков   или, наоборот,   укоротить   имеющийся диск с целью добавления нового. Результат,   как   правило, сразу   бросается в глаза, потому   что сумма емкостей всех дисков, возвращаемых   операционной системой, перестает   равняться полной емкости жесткого диска даже приблизительно. Для   преодоления этого эффекта нужно либо принудительно разрушать сигнатуры   суперблока в начале раздела, либо   использовать утилиту форматирования,  которая   всегда производит форматирование раздела в соответствии с размером, указанным   в таблице разделов.</p>
</DIV>
<div align="justify">
  <p><a href="#top" target="_top" class="style4">наверх</a></p>
</div>
</body>
</html>
